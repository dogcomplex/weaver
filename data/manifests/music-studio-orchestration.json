{
  "id": "music-studio-orchestration",
  "name": "Music Studio Orchestration",
  "mappings": [
    {
      "knotType": "CheckpointLoaderSimple",
      "metaphorElement": "Instrument Selection",
      "label": "Choose Instrument",
      "description": "Loading a checkpoint is like selecting which instrument to use for the performance. The model file determines the 'voice' of the generation, just as different instruments produce different tones. The mapping works well because model selection is abstract enough to benefit from metaphor — users don't need to understand the technical internals, only that different models sound different. Weakness: doesn't capture that models are pre-trained neural networks, but that's acceptable here.",
      "facadeControls": [
        {
          "id": "instrument-selector",
          "controlType": "dropdown",
          "label": "Instrument Type",
          "rationale": "A dropdown naturally represents choosing one model from many available options, just as a musician selects one instrument to play. The metaphor treats model selection as an aesthetic choice, not a technical one.",
          "position": {
            "x": 0.5,
            "y": 0.8
          },
          "binding": {
            "dataPath": "inputs.ckpt_name",
            "min": 0,
            "max": 100,
            "step": 1
          }
        }
      ],
      "assetPrompt": "A detailed musical instrument (violin, trumpet, or synthesizer) rendered in clean lines, sitting on a stand, icon-quality, 256x256, professional lighting",
      "size": {
        "width": 200,
        "height": 160
      }
    },
    {
      "knotType": "CLIPTextEncode",
      "metaphorElement": "Positive Score (Sheet Music)",
      "label": "Positive Prompt - Composition",
      "description": "The positive CLIP text prompt becomes the sheet music — the explicit instructions for what the performance should sound like. Text remains fully textual (users type words directly into a musical score), preserving the core capability. This is the primary creative instruction. Strength: text is respected as text. Weakness: sheet music is visual, not auditory, but this is acceptable as a teaching metaphor.",
      "facadeControls": [
        {
          "id": "positive-score",
          "controlType": "text",
          "label": "What Should Play",
          "rationale": "A text area represents the musical composition instructions — users literally write what they want to hear. This keeps text input visible and editable, critical for this workflow.",
          "position": {
            "x": 0.3,
            "y": 0.5
          },
          "binding": {
            "dataPath": "inputs.text",
            "min": 0,
            "max": 77,
            "step": 1
          }
        }
      ],
      "assetPrompt": "A sheet of musical staff paper with handwritten notes, treble clef, a few bars of music, icon-quality, 256x256, warm paper texture",
      "size": {
        "width": 220,
        "height": 140
      }
    },
    {
      "knotType": "CLIPTextEncode",
      "metaphorElement": "Negative Score (Muted Instruments)",
      "label": "Negative Prompt - Avoid Playing",
      "description": "The negative CLIP prompt becomes instructions for which instruments should be muted or excluded from the performance. This is equally textual and equally important — it removes unwanted elements. Strength: text remains text, and the metaphor explains the logic (muting = exclusion). Weakness: negation is somewhat less intuitive in musical metaphor than positive composition.",
      "facadeControls": [
        {
          "id": "negative-score",
          "controlType": "text",
          "label": "What Should NOT Play",
          "rationale": "Another text area for exclusions. The metaphor frames negatives as 'muted instruments' — still understandable and textual.",
          "position": {
            "x": 0.7,
            "y": 0.5
          },
          "binding": {
            "dataPath": "inputs.text",
            "min": 0,
            "max": 77,
            "step": 1
          }
        }
      ],
      "assetPrompt": "A sheet of musical staff paper with muted trumpet or violin (grayed out, with an X through the instrument), icon-quality, 256x256",
      "size": {
        "width": 220,
        "height": 140
      }
    },
    {
      "knotType": "EmptyLatentImage",
      "metaphorElement": "Blank Canvas / Silence",
      "label": "Performance Dimensions",
      "description": "The empty latent is the silence before the performance begins, the untouched canvas of audio space. Users set the dimensions (width/height/batch_size), which in the metaphor represent the duration and number of simultaneous performances. Strength: silence is intuitive as a blank state. Weakness: 'width' and 'height' don't map cleanly to audio — they're image dimensions in the actual system, but in a music studio we'd expect time/channels.",
      "facadeControls": [
        {
          "id": "performance-width",
          "controlType": "slider",
          "label": "Duration (bars)",
          "rationale": "Width becomes the length of the performance in musical bars. A slider feels natural for adjusting song length.",
          "position": {
            "x": 0.2,
            "y": 0.3
          },
          "binding": {
            "dataPath": "inputs.width",
            "min": 256,
            "max": 1024,
            "step": 64
          }
        },
        {
          "id": "performance-height",
          "controlType": "slider",
          "label": "Voices (polyphony)",
          "rationale": "Height becomes the number of simultaneous instrumental voices. More voices = richer polyphony.",
          "position": {
            "x": 0.5,
            "y": 0.3
          },
          "binding": {
            "dataPath": "inputs.height",
            "min": 256,
            "max": 1024,
            "step": 64
          }
        },
        {
          "id": "batch-size",
          "controlType": "slider",
          "label": "Parallel Performances",
          "rationale": "Batch size becomes the number of times we perform the composition simultaneously. A slider for quantity.",
          "position": {
            "x": 0.8,
            "y": 0.3
          },
          "binding": {
            "dataPath": "inputs.batch_size",
            "min": 1,
            "max": 16,
            "step": 1
          }
        }
      ],
      "assetPrompt": "A blank page with musical staff lines faintly visible, clean and ready for notes, icon-quality, 256x256, minimalist design",
      "size": {
        "width": 200,
        "height": 140
      }
    },
    {
      "knotType": "KSampler",
      "metaphorElement": "Recording Studio / Rehearsal Session",
      "label": "Composition Generation Engine",
      "description": "The KSampler becomes the recording studio where the composition is realized — the iterative process of playing through the music, refining it, and capturing the best take. The parameters (steps, cfg, sampler_name, scheduler, seed, denoise) control how the performance is conducted and recorded. Strength: 'recording' captures iteration well; rehearsal involves refinement. Weakness: 'sampler' and 'scheduler' are technical concepts that don't map intuitively to studio activities, though we can finesse this.",
      "facadeControls": [
        {
          "id": "rehearsal-iterations",
          "controlType": "slider",
          "label": "Rehearsal Takes",
          "rationale": "Steps become the number of rehearsal takes — more takes mean more refinement. A slider naturally represents quantity of iterations.",
          "position": {
            "x": 0.3,
            "y": 0.6
          },
          "binding": {
            "dataPath": "inputs.steps",
            "min": 1,
            "max": 150,
            "step": 1
          }
        },
        {
          "id": "conductor-strictness",
          "controlType": "slider",
          "label": "Conductor Strictness (CFG)",
          "rationale": "CFG becomes how strictly the conductor adheres to the sheet music. Low values = more creative freedom; high values = strict adherence to the score. This is an intuitive metaphor for guidance scale.",
          "position": {
            "x": 0.7,
            "y": 0.6
          },
          "binding": {
            "dataPath": "inputs.cfg",
            "min": 1,
            "max": 20,
            "step": 0.5
          }
        },
        {
          "id": "seed-randomness",
          "controlType": "slider",
          "label": "Random Seed",
          "rationale": "Seed controls the randomness of expression — two performances with the same seed will sound identical; different seeds introduce variation. Slider represents picking a particular 'seed' for the performance.",
          "position": {
            "x": 0.5,
            "y": 0.7
          },
          "binding": {
            "dataPath": "inputs.seed",
            "min": 0,
            "max": 4294967295,
            "step": 1
          }
        },
        {
          "id": "sampler-style",
          "controlType": "dropdown",
          "label": "Performance Style",
          "rationale": "Different samplers become different performance styles or conducting techniques (e.g., 'DPM++ = Baroque formal style', 'Euler = Romantic expressive style'). Dropdown for categorical choice.",
          "position": {
            "x": 0.2,
            "y": 0.75
          },
          "binding": {
            "dataPath": "inputs.sampler_name",
            "min": 0,
            "max": 10,
            "step": 1
          }
        },
        {
          "id": "schedule-tempo",
          "controlType": "dropdown",
          "label": "Tempo Schedule",
          "rationale": "Scheduler becomes the tempo progression — how the performance accelerates or settles. Different schedules for different pacing strategies.",
          "position": {
            "x": 0.8,
            "y": 0.75
          },
          "binding": {
            "dataPath": "inputs.scheduler",
            "min": 0,
            "max": 5,
            "step": 1
          }
        },
        {
          "id": "denoise-clarity",
          "controlType": "slider",
          "label": "Clarity / Denoise",
          "rationale": "Denoise becomes how much we clean up the final recording — removing background noise and imperfections. Higher = clearer final audio.",
          "position": {
            "x": 0.5,
            "y": 0.85
          },
          "binding": {
            "dataPath": "inputs.denoise",
            "min": 0,
            "max": 1,
            "step": 0.01
          }
        }
      ],
      "assetPrompt": "A professional recording studio control room with soundboard, mixing console, comfortable chair, acoustic panels on walls, icon-quality, 256x256, warm professional lighting",
      "size": {
        "width": 240,
        "height": 180
      }
    },
    {
      "knotType": "VAEDecode",
      "metaphorElement": "Audio Mastering / Rendering",
      "label": "Final Mix & Master",
      "description": "The VAE decode step becomes the mastering process — taking the recorded raw performance and applying final EQ, compression, and rendering to a broadcast-quality audio format. This is a technical but understandable step. Strength: mastering is a real studio process. Weakness: VAE's actual function (latent space decoding) is completely abstracted, but that's acceptable for a mixed audience.",
      "facadeControls": [],
      "assetPrompt": "A mastering engineer's workspace with high-end studio monitors, professional outboard gear, a sleek mastering console, glowing meters and level displays, icon-quality, 256x256",
      "size": {
        "width": 200,
        "height": 160
      }
    },
    {
      "knotType": "SaveImage",
      "metaphorElement": "Export & Archive",
      "label": "Save Performance Recording",
      "description": "The final output becomes the saved recording — exporting the mastered audio to a file with a chosen filename. This preserves the user's work. Strength: save/export is universally understood. Weakness: the actual output is an image (visual), not audio, but users understand 'save' as the end product storage regardless.",
      "facadeControls": [
        {
          "id": "export-filename",
          "controlType": "text",
          "label": "Recording Name",
          "rationale": "A text field for the filename allows users to name their composition/performance. This is how they identify and retrieve their work.",
          "position": {
            "x": 0.5,
            "y": 0.9
          },
          "binding": {
            "dataPath": "inputs.filename_prefix",
            "min": 0,
            "max": 255,
            "step": 1
          }
        }
      ],
      "assetPrompt": "A filing cabinet or vault with CD/vinyl cases neatly organized on shelves, with labels visible, icon-quality, 256x256, archival aesthetic",
      "size": {
        "width": 200,
        "height": 160
      }
    }
  ],
  "threadStyle": {
    "colorBy": "dataType",
    "metaphor": "Musical signals and instructions flowing between elements — model blueprints, performance instructions (text), and the evolving composition",
    "colorMap": {
      "MODEL": {
        "color": "#8B4513",
        "width": 4,
        "style": "solid",
        "label": "Instrument Blueprint"
      },
      "CONDITIONING": {
        "color": "#FFD700",
        "width": 3,
        "style": "solid",
        "label": "Performance Instructions"
      },
      "LATENT": {
        "color": "#4169E1",
        "width": 3,
        "style": "dashed",
        "label": "Composition in Progress"
      },
      "IMAGE": {
        "color": "#228B22",
        "width": 3,
        "style": "solid",
        "label": "Final Recording"
      }
    }
  },
  "waveMetaphor": "Data flows as musical signals: brown threads carry the instrument specification (model), gold threads carry the compositional instructions (text prompts), blue dashed threads carry the evolving musical composition (latents), and green threads carry the final rendered recording (image output). Each token moves like a note being passed through the orchestra.",
  "sceneDescription": "A bird's-eye view of a professional music studio and recording facility. On the left stands the Instrument Selection podium. Center-left hosts the Composition Desk with two facing music stands (positive and negative prompts). Below that sits the Blank Canvas of silence. At the center stands the Recording Studio — the main hub where the conductor oversees rehearsals. To the right flows the Mastering Suite, where audio is polished. Finally, at the far right is the Archive vault where the final recording is stored. Threads of golden instruction flow from the composition desk to the studio. Brown threads deliver the instrument blueprint. Blue threads show the composition evolving through the studio and into mastering. Green threads carry the final recording to the archive.",
  "sceneConfig": {
    "background": "#2A2A3E",
    "layoutMode": "horizontal",
    "spacing": {
      "x": 300,
      "y": 200
    }
  },
  "aiVocabulary": "In this workflow, users 'select an instrument' (load checkpoint), 'compose positive and negative scores' (write prompts), 'set up the performance dimensions' (empty latent), 'conduct rehearsals in the studio' (KSampler with controls for iterations, strictness, style, and clarity), 'master the final recording' (VAE decode), and 'archive the completed composition' (save image). The studio is where raw artistic intent meets technical precision through iterative refinement.",
  "detailedScores": {
    "mappingScores": [
      {
        "knotType": "CheckpointLoaderSimple",
        "metaphorElement": "Instrument Selection",
        "elementFit": 8,
        "inputOutputFit": 8,
        "attributeScores": [
          {
            "parameterName": "ckpt_name",
            "metaphorControl": "Instrument Type Dropdown",
            "explanatoryPower": 9,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Dropdown selections are intuitive for choosing one item from many. Model files determining generation style maps well to instrument selection determining performance timbre. No loss of capability."
          }
        ],
        "overallMappingScore": 8,
        "rationale": "Strong mapping. Models as instruments is intuitive and doesn't require users to understand neural networks. The dropdown control is natural. Only minor weakness: doesn't convey that models are pre-trained, but acceptable for mixed audience."
      },
      {
        "knotType": "CLIPTextEncode",
        "metaphorElement": "Positive Score (Sheet Music)",
        "elementFit": 8,
        "inputOutputFit": 9,
        "attributeScores": [
          {
            "parameterName": "text",
            "metaphorControl": "Text Area - What Should Play",
            "explanatoryPower": 10,
            "truthfulness": 10,
            "intuitiveness": 10,
            "rationale": "Text input remains fully textual. Users write natural language descriptions directly into a text field labeled 'What Should Play'. No abstraction, no loss of capability. Perfect mapping."
          }
        ],
        "overallMappingScore": 9,
        "rationale": "Excellent. Sheet music as the positive prompt is both literal and metaphorical — users literally write what they want. Text is preserved as text. This is the gold standard for I/O handling."
      },
      {
        "knotType": "CLIPTextEncode",
        "metaphorElement": "Negative Score (Muted Instruments)",
        "elementFit": 7,
        "inputOutputFit": 9,
        "attributeScores": [
          {
            "parameterName": "text",
            "metaphorControl": "Text Area - What Should NOT Play",
            "explanatoryPower": 8,
            "truthfulness": 10,
            "intuitiveness": 7,
            "rationale": "Text input is fully preserved and textual. However, 'muting' is a less intuitive metaphor for negation than positive composition is for positive prompts. Still good, slightly less intuitive."
          }
        ],
        "overallMappingScore": 8,
        "rationale": "Good. Negative prompts as muted instruments works, though negation is inherently less intuitive than positive direction. Text is respected. Minor weakness in explanatory power for why negation works this way."
      },
      {
        "knotType": "EmptyLatentImage",
        "metaphorElement": "Blank Canvas / Silence",
        "elementFit": 6,
        "inputOutputFit": 5,
        "attributeScores": [
          {
            "parameterName": "width",
            "metaphorControl": "Duration Slider",
            "explanatoryPower": 6,
            "truthfulness": 4,
            "intuitiveness": 6,
            "rationale": "Width in the actual system is image width (pixel columns). We're mapping it to musical 'bars' or duration. Truthfulness suffers because the parameter doesn't actually control time—it controls spatial dimensions. Users may be confused."
          },
          {
            "parameterName": "height",
            "metaphorControl": "Polyphony Slider",
            "explanatoryPower": 6,
            "truthfulness": 4,
            "intuitiveness": 6,
            "rationale": "Height is actually image height. Mapping to 'voices' is creative but not truthful to what the parameter does. This is a weakness—the metaphor forces a fit that doesn't quite hold."
          },
          {
            "parameterName": "batch_size",
            "metaphorControl": "Parallel Performances Slider",
            "explanatoryPower": 8,
            "truthfulness": 9,
            "intuitiveness": 8,
            "rationale": "Batch size genuinely represents multiple simultaneous outputs. This mapping is truthful and intuitive."
          }
        ],
        "overallMappingScore": 6,
        "rationale": "Moderate weakness. While 'blank silence' is intuitive as a starting state, the control mappings for width and height don't align with what those parameters actually do. A slider labeled 'Duration' for image width is metaphorically creative but technically misleading. Batch size saves this mapping from being worse."
      },
      {
        "knotType": "KSampler",
        "metaphorElement": "Recording Studio / Rehearsal Session",
        "elementFit": 8,
        "inputOutputFit": 7,
        "attributeScores": [
          {
            "parameterName": "steps",
            "metaphorControl": "Rehearsal Takes Slider",
            "explanatoryPower": 9,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Steps as rehearsal takes is intuitive—more takes = more refinement. The metaphor is slightly loose (steps aren't discrete 'takes' but continuous iterations), but explains the concept well."
          },
          {
            "parameterName": "cfg",
            "metaphorControl": "Conductor Strictness Slider",
            "explanatoryPower": 8,
            "truthfulness": 7,
            "intuitiveness": 8,
            "rationale": "CFG (guidance scale) as conductor strictness is metaphorically sound. Higher CFG = stricter adherence to prompts; lower = more creative freedom. Truthful enough. Intuitive for users to understand that stricter = more guided."
          },
          {
            "parameterName": "seed",
            "metaphorControl": "Random Seed Slider",
            "explanatoryPower": 7,
            "truthfulness": 8,
            "intuitiveness": 6,
            "rationale": "Seed as a selector for randomness is truthful but abstract. The metaphor doesn't intuitively explain why different seeds produce different performances—it requires some technical understanding. Acceptable but not ideal."
          },
          {
            "parameterName": "sampler_name",
            "metaphorControl": "Performance Style Dropdown",
            "explanatoryPower": 6,
            "truthfulness": 5,
            "intuitiveness": 5,
            "rationale": "Sampler names (DPM++, Euler, etc.) are highly technical. Mapping to 'performance styles' like 'Baroque formal' is creative but potentially misleading—these samplers don't have inherent aesthetic properties, only mathematical differences. Weak fit."
          },
          {
            "parameterName": "scheduler",
            "metaphorControl": "Tempo Schedule Dropdown",
            "explanatoryPower": 5,
            "truthfulness": 4,
            "intuitiveness": 4,
            "rationale": "Scheduler's actual function (step size progression) doesn't map well to 'tempo' in a musical sense. This is a forced metaphor with low truthfulness and intuitiveness. Acceptable only as abstraction for non-technical users."
          },
          {
            "parameterName": "denoise",
            "metaphorControl": "Clarity / Denoise Slider",
            "explanatoryPower": 9,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Denoise parameter becomes clarity in mastering—a direct and intuitive mapping. Higher values remove noise; lower allow more detail. Truthful and explanatory."
          }
        ],
        "overallMappingScore": 7,
        "rationale": "KSampler as a recording studio works well for steps, cfg, and denoise (scores 8-9 each). However, sampler_name and scheduler are technical parameters that don't map cleanly to musical concepts. The metaphor stretches credibility for these two controls. Overall score reflects the mix: strong on the core parameters (iterations, guidance, clarity) but weaker on technical options (sampler algorithm, scheduler type)."
      },
      {
        "knotType": "VAEDecode",
        "metaphorElement": "Audio Mastering / Rendering",
        "elementFit": 7,
        "inputOutputFit": 6,
        "attributeScores": [],
        "overallMappingScore": 6.5,
        "rationale": "Mastering is an intuitive concept for mixed audiences. However, the VAE's actual function—decoding latent space to image space—is completely abstracted away. For technical users, this loses important information. For non-technical users, 'mastering' is a reasonable but imperfect metaphor. No facade controls needed since this is a pass-through knot."
      },
      {
        "knotType": "SaveImage",
        "metaphorElement": "Export & Archive",
        "elementFit": 8,
        "inputOutputFit": 7,
        "attributeScores": [
          {
            "parameterName": "filename_prefix",
            "metaphorControl": "Recording Name Text Field",
            "explanatoryPower": 10,
            "truthfulness": 10,
            "intuitiveness": 10,
            "rationale": "Filename as recording name is direct and truthful. Users type a name, and that's how they identify their output. Perfect fit."
          }
        ],
        "overallMappingScore": 8,
        "rationale": "Strong. Archive/export is universally understood. The text field for filename is intuitive. Only minor weakness: the actual output is a visual image, but users frame it as a 'recording' in this metaphor. Acceptable since save/file operations are the core function here."
      }
    ],
    "ioAnalysis": {
      "textInputHandling": 9,
      "modelInputHandling": 8,
      "intermediateHandling": 5,
      "finalOutputHandling": 6,
      "rationale": "STRENGTHS: Text input (positive and negative prompts) is fully preserved as text in dedicated text areas—users type natural language, no abstraction. Model input (checkpoint) maps well to instrument selection—metaphor explains intent without technical jargon. WEAKNESSES: Intermediates (latent space, conditioning) are abstracted into 'performance in progress'—invisible to users, which is okay for mixed audience but loses transparency. Final output is actually a visual image, but the metaphor frames it as an 'audio recording'—a category mismatch. Users understand they're saving *something*, but the metaphor doesn't explicitly convey 'this is what you see visually.'"
    }
  },
  "scores": {
    "explanatoryPower": 7.8,
    "truthfulness": 6.9,
    "completeness": 8.5,
    "intuitiveInteraction": 7.6,
    "fractalConsistency": 6.8,
    "overall": 7.584999999999999,
    "rationale": "STRENGTHS: The music studio metaphor is cohesive and intuitive for a mixed audience. Text prompts remain fully textual and editable (score 9/10)—users still type descriptions as natural language. Model loading maps cleanly to instrument selection (score 8/10). Core generation parameters (steps, cfg, denoise) have excellent control mappings (8-9/10 each). The overall scene is easy to visualize: a professional studio with clear workflow from instrument selection through composition, rehearsal, mastering, and archival. WEAKNESSES: (1) Technical parameters (sampler_name, scheduler) don't map well to musical concepts (scores 5-6/10), reducing truthfulness. (2) Width/height don't actually control performance duration/voices—they're image dimensions forced into a music metaphor (truthfulness 4/10). (3) Intermediate steps (VAE decode) are abstracted, acceptable but opaque. (4) Final output is a visual image, not audio—the metaphor's framing as 'audio recording' creates a category mismatch, though users still understand they're saving their work. WEIGHTED BREAKDOWN: Explanatory power (30%): 7.8 (text, models, and core parameters explain well; technical samplers weaken it). Truthfulness (25%): 6.9 (text and models are truthful; width/height/sampler truthfulness issues). Completeness (20%): 8.5 (all 7 knots mapped, all critical parameters have controls). Intuitive interaction (15%): 7.6 (most controls feel natural; sampler/scheduler less so). Fractal consistency (10%): 6.8 (strong consistency for composition/performance; breaks down for technical options and image dimensions). Overall weighted: 7.4/10. This metaphor works well for the intended purpose—generating images from text using a diffusion model—but the music studio framing introduces some friction around technical parameter selection and the actual visual nature of the output."
  }
}
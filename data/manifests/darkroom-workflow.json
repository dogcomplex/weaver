{
  "id": "darkroom-workflow",
  "name": "Darkroom Photography",
  "mappings": [
    {
      "knotType": "CheckpointLoaderSimple",
      "metaphorElement": "Camera Body & Lens Selection",
      "label": "Camera Selection",
      "description": "The checkpoint is the core tool that shapes all output, much like choosing a specific camera body and lens determines the optical characteristics of every photo. The model file is essentially a pre-calibrated optical system. Strength: models ARE tools that determine output character. Weakness: actual checkpoint loading is instantaneous, not a physical selection process.",
      "facadeControls": [
        {
          "id": "ckpt_name",
          "controlType": "dropdown",
          "label": "Camera Model",
          "rationale": "Dropdown presents checkpoint options as discrete camera choices—users browse available cameras (models) and select one, matching how photographers choose equipment",
          "position": {
            "x": 0.3,
            "y": 0.2
          },
          "binding": {
            "dataPath": "inputs.ckpt_name",
            "options": "checkpoint_names"
          }
        }
      ],
      "assetPrompt": "Professional camera on a tripod with interchangeable lenses displayed, viewed from above, clean icon style, metallic gray and black",
      "size": {
        "width": 180,
        "height": 140
      }
    },
    {
      "knotType": "CLIPTextEncode",
      "metaphorElement": "Shot Direction / Composition Notes",
      "label": "Positive Composition (What You Want)",
      "description": "Text prompts describe what the photographer wants to capture—composition, lighting, mood. This is explicitly textual input, which MUST remain visible as text because users write detailed descriptions. The metaphor treats the positive prompt as a director's notes for what to photograph. Strength: text input stays textual and editable. Weakness: composition notes don't directly generate images; they inform the imaging process, creating indirect mapping.",
      "facadeControls": [
        {
          "id": "text_positive",
          "controlType": "text",
          "label": "Shot Direction",
          "rationale": "Large text area where users write compositional direction—'golden hour lighting, portrait, soft focus background'—directly mirroring how photographers or directors describe shots they want",
          "position": {
            "x": 0.2,
            "y": 0.4
          },
          "binding": {
            "dataPath": "inputs.text",
            "maxLength": 1000
          }
        }
      ],
      "assetPrompt": "Director's clipboard with handwritten notes and sketches, soft pencil marks, artistic style, warm paper tone",
      "size": {
        "width": 200,
        "height": 160
      }
    },
    {
      "knotType": "CLIPTextEncode",
      "metaphorElement": "Exclusions / What to Avoid",
      "label": "Negative Composition (What to Avoid)",
      "description": "Negative prompts specify unwanted elements—artifacts, bad lighting, unwanted objects. In photography metaphor, these are notes about what NOT to include in the frame or what to avoid in post-processing. Strength: explicit text control remains textual. Weakness: photographers don't typically use formal 'exclusion lists'—they think in terms of what to include.",
      "facadeControls": [
        {
          "id": "text_negative",
          "controlType": "text",
          "label": "Unwanted Elements",
          "rationale": "Text area for rejections—'blurry, watermark, low quality'—treating negative prompts as a checklist of things the photographer wants to filter out during the shoot",
          "position": {
            "x": 0.8,
            "y": 0.4
          },
          "binding": {
            "dataPath": "inputs.text",
            "maxLength": 1000
          }
        }
      ],
      "assetPrompt": "Red X marks on photo reference sheet, rejection symbols, artistic crossed-out sketches on white paper",
      "size": {
        "width": 200,
        "height": 160
      }
    },
    {
      "knotType": "EmptyLatentImage",
      "metaphorElement": "Film Stock / Canvas Preparation",
      "label": "Film Format Selection",
      "description": "Empty latent initializes the generation space with dimensions and batch size. In the darkroom metaphor, this is selecting film stock (width/height = film dimensions, batch_size = number of exposures on a roll). Strength: photographers DO select film format before shooting. Weakness: 'latent space' is abstract—the metaphor treats it as the blank film or canvas.",
      "facadeControls": [
        {
          "id": "width",
          "controlType": "dropdown",
          "label": "Film Width (pixels)",
          "rationale": "Dropdown for common aspect ratios (35mm, medium format, square, panoramic)—photographers think in film formats, not pixel counts",
          "position": {
            "x": 0.5,
            "y": 0.15
          },
          "binding": {
            "dataPath": "inputs.width",
            "options": [
              512,
              576,
              640,
              768,
              1024
            ]
          }
        },
        {
          "id": "height",
          "controlType": "dropdown",
          "label": "Film Height (pixels)",
          "rationale": "Dropdown paired with width to set aspect ratio—users select standard formats rather than entering raw pixel dimensions",
          "position": {
            "x": 0.5,
            "y": 0.25
          },
          "binding": {
            "dataPath": "inputs.height",
            "options": [
              512,
              576,
              640,
              768,
              1024
            ]
          }
        },
        {
          "id": "batch_size",
          "controlType": "slider",
          "label": "Exposures Per Roll",
          "rationale": "Slider from 1-8 representing how many frames to capture; photographers think of film rolls with multiple exposures, matching batch_size semantics",
          "position": {
            "x": 0.5,
            "y": 0.35
          },
          "binding": {
            "dataPath": "inputs.batch_size",
            "min": 1,
            "max": 8,
            "step": 1
          }
        }
      ],
      "assetPrompt": "Stack of film rolls and photography formats—35mm canister, medium format frame, Polaroid, arranged neatly, photography equipment aesthetic",
      "size": {
        "width": 200,
        "height": 160
      }
    },
    {
      "knotType": "KSampler",
      "metaphorElement": "Exposure Development / Shutter & Processing",
      "label": "Exposure & Development",
      "description": "KSampler is the core generation engine that iteratively refines output. In darkroom metaphor, this is the controlled exposure and chemical development of film—light hits film, chemicals react progressively, and detail emerges. steps = duration of chemical bath, cfg = how much you 'push' development (stronger chemical = more contrast/detail), seed = initial light exposure conditions. Strength: excellent metaphorical fit—development IS iterative refinement over time. Weakness: sampler_name and scheduler_name are abstract (developers might not know photography equivalents).",
      "facadeControls": [
        {
          "id": "seed",
          "controlType": "slider",
          "label": "Exposure Index (Light Exposure)",
          "rationale": "Seed controls initial randomness; in photography, exposure index (ISO equivalent, light amount) determines initial image characteristics—different seeds = different initial light conditions",
          "position": {
            "x": 0.5,
            "y": 0.55
          },
          "binding": {
            "dataPath": "inputs.seed",
            "min": 0,
            "max": 4294967295,
            "step": 1
          }
        },
        {
          "id": "steps",
          "controlType": "slider",
          "label": "Development Time (Iterations)",
          "rationale": "Steps = number of refinement iterations; development time in darkroom determines image clarity—more time = more detail emerges. Slider from 20-150 steps maps intuitively to 'how long you soak the film'",
          "position": {
            "x": 0.5,
            "y": 0.65
          },
          "binding": {
            "dataPath": "inputs.steps",
            "min": 20,
            "max": 150,
            "step": 1
          }
        },
        {
          "id": "cfg",
          "controlType": "slider",
          "label": "Development Strength (Guidance Scale)",
          "rationale": "CFG = how strongly prompts influence output; in darkroom, stronger chemicals = more pronounced development of details. Slider represents how 'aggressive' the chemical bath is—higher values push development further toward the prompt intent",
          "position": {
            "x": 0.5,
            "y": 0.75
          },
          "binding": {
            "dataPath": "inputs.cfg",
            "min": 1,
            "max": 20,
            "step": 0.5
          }
        },
        {
          "id": "sampler_name",
          "controlType": "dropdown",
          "label": "Development Method",
          "rationale": "Different sampling algorithms; in darkroom metaphor, different chemical formulations (D-76, HC-110, etc.) produce different tonal curves and contrast—users select a 'recipe'",
          "position": {
            "x": 0.3,
            "y": 0.85
          },
          "binding": {
            "dataPath": "inputs.sampler_name",
            "options": [
              "euler",
              "heun",
              "dpmpp_2m",
              "dpmpp_3m_sde"
            ]
          }
        },
        {
          "id": "scheduler",
          "controlType": "dropdown",
          "label": "Temperature Schedule (Noise Decay)",
          "rationale": "Scheduler controls refinement curve; in darkroom, temperature schedule could represent cooling bath—how the chemical activity decreases over time affects final contrast",
          "position": {
            "x": 0.7,
            "y": 0.85
          },
          "binding": {
            "dataPath": "inputs.scheduler",
            "options": [
              "normal",
              "karras",
              "exponential",
              "simple"
            ]
          }
        }
      ],
      "assetPrompt": "Darkroom chemical tray with developing film strips being immersed, warm red safelight glowing overhead, hands using tongs, chemistry bottles on shelf, monochrome atmospheric",
      "size": {
        "width": 240,
        "height": 200
      }
    },
    {
      "knotType": "VAEDecode",
      "metaphorElement": "Enlargement / Print From Negative",
      "label": "Enlargement Process",
      "description": "VAE decode translates latent (compressed, abstract representation) into a full image. In photography, the enlarger projects a 35mm negative onto photographic paper, expanding it to viewable size. The latent 'negative' (compressed info) becomes a full 'print' (image). Strength: excellent metaphorical fit—enlargement IS taking compressed info and expanding to full resolution. Weakness: the VAE model itself is hidden; users don't select it, they just see the output expand.",
      "facadeControls": [],
      "assetPrompt": "Photographic enlarger with lens and negative holder, light beam projecting downward onto white easel, darkroom setting with red safelight, detailed apparatus",
      "size": {
        "width": 200,
        "height": 180
      }
    },
    {
      "knotType": "SaveImage",
      "metaphorElement": "Print Finishing & Filing",
      "label": "Photograph Filing & Export",
      "description": "Save image stores the final output with a filename. In darkroom metaphor, this is the final print being dried, filed, and stored in the photographer's portfolio. filename_prefix is how the photographer organizes and names their work. Strength: intuitive—photographers DO file and name their prints. Weakness: actual export is just file I/O, not a physical finishing process.",
      "facadeControls": [
        {
          "id": "filename_prefix",
          "controlType": "text",
          "label": "Print Archive Name",
          "rationale": "Text input for filename—photographers name their prints with session dates or subjects ('Portrait_2024_01', 'Landscape_Golden_Hour')—text entry mirrors actual file naming",
          "position": {
            "x": 0.5,
            "y": 0.95
          },
          "binding": {
            "dataPath": "inputs.filename_prefix",
            "maxLength": 64
          }
        }
      ],
      "assetPrompt": "Prints hanging on clothesline with clips in darkroom, archival boxes below, filing cabinet, labels being written, warm amber light",
      "size": {
        "width": 200,
        "height": 160
      }
    }
  ],
  "threadStyle": {
    "colorBy": "dataType",
    "metaphor": "Information flows like light, chemicals, and developed film through the darkroom process—models flow as equipment selections, text prompts as direction cards, images as physical prints",
    "colorMap": {
      "MODEL": {
        "color": "#8B4513",
        "width": 4,
        "style": "solid",
        "label": "Camera/Equipment Selection"
      },
      "CLIP": {
        "color": "#FFD700",
        "width": 2,
        "style": "dashed",
        "label": "Direction/Guidance"
      },
      "IMAGE": {
        "color": "#E8E8E8",
        "width": 3,
        "style": "solid",
        "label": "Developed Print"
      },
      "LATENT": {
        "color": "#4A4A4A",
        "width": 2,
        "style": "dotted",
        "label": "Unexposed Negative"
      }
    }
  },
  "waveMetaphor": "Data tokens appear as small photographs traveling along threads—model tokens are labeled 'Camera Body', text tokens are tiny direction cards with text visible, latent tokens are 35mm negative strips, final image tokens are full color prints emerging from the enlarger",
  "sceneDescription": "A traditional darkroom viewed from above: on the left, camera selection station with lens cases. Center-left, two director's clipboards (positive and negative prompts) with handwritten notes. Center, film stock selector. Center-right, a large darkroom tray representing the sampler/development chamber with red safelight above. Right side, an enlarger projecting downward. Far right, print drying rack and filing cabinet. Red safelight casts warm glow across the space. Threads connect stations like light paths and chemical flows.",
  "sceneConfig": {
    "background": "#2A1F1F",
    "layoutMode": "horizontal",
    "spacing": {
      "x": 300,
      "y": 200
    }
  },
  "aiVocabulary": "In the Darkroom workflow, we START by selecting our CAMERA (checkpoint model), which determines the optical character of our work. We write our SHOT DIRECTION (positive prompt) describing what we want to capture—lighting, mood, composition. We note what to AVOID (negative prompt). We select our FILM FORMAT—dimensions and batch size determine how many exposures we'll take. Then we move to the DEVELOPMENT CHAMBER, where we EXPOSE the film to light (seed), let it DEVELOP over time (steps), and control how AGGRESSIVELY we push the development (cfg scale). We choose our DEVELOPMENT RECIPE (sampler) and TEMPERATURE SCHEDULE (scheduler). The ENLARGER projects our latent negative into a full-size print. Finally, we DRY and FILE our prints with a NAME. The entire process is iterative refinement—from abstract direction to tangible image.",
  "detailedScores": {
    "mappingScores": [
      {
        "knotType": "CheckpointLoaderSimple",
        "metaphorElement": "Camera Body & Lens Selection",
        "elementFit": 8,
        "attributeScores": [
          {
            "parameterName": "ckpt_name",
            "metaphorControl": "Camera Model Dropdown",
            "explanatoryPower": 9,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Photographers absolutely choose cameras; dropdown presentation mirrors equipment selection. Users understand 'pick a camera body' instantly."
          }
        ],
        "inputOutputFit": 8,
        "overallMappingScore": 8,
        "rationale": "Camera selection is a perfect match for checkpoint loading—both are selecting a tool that shapes all downstream output. The model's character becomes the camera's optical character."
      },
      {
        "knotType": "CLIPTextEncode",
        "metaphorElement": "Shot Direction / Composition Notes",
        "elementFit": 8,
        "attributeScores": [
          {
            "parameterName": "text",
            "metaphorControl": "Text Input - Shot Direction",
            "explanatoryPower": 9,
            "truthfulness": 9,
            "intuitiveness": 10,
            "rationale": "Text prompts ARE directions for composition—users write natural language exactly as they would brief a photographer or director. Text remains explicitly textual and editable."
          }
        ],
        "inputOutputFit": 9,
        "overallMappingScore": 8.5,
        "rationale": "Director's notes is perfect for positive prompts. Text input is preserved, meaning users see exactly what they typed and can edit it. Mapping acknowledges that composition notes INFORM but don't directly generate."
      },
      {
        "knotType": "CLIPTextEncode",
        "metaphorElement": "Exclusions / What to Avoid",
        "elementFit": 7,
        "attributeScores": [
          {
            "parameterName": "text",
            "metaphorControl": "Text Input - Unwanted Elements",
            "explanatoryPower": 8,
            "truthfulness": 8,
            "intuitiveness": 7,
            "rationale": "Negative prompts work as rejection lists ('no blur, no watermark'). Slightly less intuitive than positive direction—photographers think in inclusions, not exclusions—but still clear and textual."
          }
        ],
        "inputOutputFit": 8,
        "overallMappingScore": 7.5,
        "rationale": "Text remains textual, but the metaphor of 'unwanted elements' is somewhat forced. Photographers don't typically use formal exclusion lists, making this slightly less natural than positive prompts."
      },
      {
        "knotType": "EmptyLatentImage",
        "metaphorElement": "Film Stock / Canvas Preparation",
        "elementFit": 7,
        "attributeScores": [
          {
            "parameterName": "width",
            "metaphorControl": "Film Width Dropdown",
            "explanatoryPower": 8,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Photographers choose aspect ratios (35mm, square, panoramic) before shooting. Dropdown shows standard formats rather than pixel counts, matching photographer mental models."
          },
          {
            "parameterName": "height",
            "metaphorControl": "Film Height Dropdown",
            "explanatoryPower": 8,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Paired width/height as aspect ratio selection is intuitive. Users don't think in pixels; they think in standard film formats."
          },
          {
            "parameterName": "batch_size",
            "metaphorControl": "Exposures Per Roll Slider",
            "explanatoryPower": 8,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Film rolls have multiple exposures; slider from 1-8 is how photographers think about batch processing. Semantically aligned with actual parameter."
          }
        ],
        "inputOutputFit": 7,
        "overallMappingScore": 7.7,
        "rationale": "Film selection is intuitive and controls are well-designed. Weakness: latent space is abstract—the metaphor treats it as 'blank film' rather than a mathematical space, which is acceptable abstraction but loses precision."
      },
      {
        "knotType": "KSampler",
        "metaphorElement": "Exposure Development / Shutter & Processing",
        "elementFit": 9,
        "attributeScores": [
          {
            "parameterName": "seed",
            "metaphorControl": "Exposure Index Slider",
            "explanatoryPower": 7,
            "truthfulness": 6,
            "intuitiveness": 7,
            "rationale": "Seed as 'exposure index' is somewhat forced—ISO/exposure doesn't directly map to random seed. Works conceptually (initial conditions), but less truthful than steps/cfg. Users will understand 'change seed to get different results' more easily than 'adjust exposure index.'"
          },
          {
            "parameterName": "steps",
            "metaphorControl": "Development Time Slider",
            "explanatoryPower": 9,
            "truthfulness": 9,
            "intuitiveness": 9,
            "rationale": "Iterative refinement over time perfectly matches film development duration. More time = more detail. Users immediately understand longer development produces more refined results. Highly truthful."
          },
          {
            "parameterName": "cfg",
            "metaphorControl": "Development Strength Slider",
            "explanatoryPower": 9,
            "truthfulness": 8,
            "intuitiveness": 9,
            "rationale": "Stronger chemicals = more pronounced development is excellent. CFG controls how strongly prompts are followed; stronger guidance = more pronounced adherence. Range 1-20 maps to 'weak to very aggressive development.' Intuitive and mostly truthful."
          },
          {
            "parameterName": "sampler_name",
            "metaphorControl": "Development Method Dropdown",
            "explanatoryPower": 6,
            "truthfulness": 5,
            "intuitiveness": 6,
            "rationale": "Different samplers (euler, heun, dpmpp) are compared to different chemical formulations. Partially intuitive—photographers do use different developers, but the specific algorithmic differences are abstract. Users won't fully understand what 'D-76 vs HC-110' means in algorithm terms."
          },
          {
            "parameterName": "scheduler",
            "metaphorControl": "Temperature Schedule Dropdown",
            "explanatoryPower": 5,
            "truthfulness": 4,
            "intuitiveness": 4,
            "rationale": "Scheduler controls noise decay curve; mapping to 'temperature schedule' as bath cooling is forced. Photographers don't control this explicitly. Weakest control in the metaphor."
          }
        ],
        "inputOutputFit": 8,
        "overallMappingScore": 7.5,
        "rationale": "KSampler mapping is strong for core parameters (steps, cfg) but weaker for abstract algorithmic choices (sampler, scheduler). The metaphor excels at explaining iterative refinement but struggles with algorithm selection."
      },
      {
        "knotType": "VAEDecode",
        "metaphorElement": "Enlargement / Print From Negative",
        "elementFit": 9,
        "attributeScores": [],
        "inputOutputFit": 9,
        "overallMappingScore": 9,
        "rationale": "VAE decode as enlargement is outstanding—compressing latent space to image IS projecting a negative onto paper. The metaphor is concrete, visual, and well-understood by photographers."
      },
      {
        "knotType": "SaveImage",
        "metaphorElement": "Print Finishing & Filing",
        "elementFit": 8,
        "attributeScores": [
          {
            "parameterName": "filename_prefix",
            "metaphorControl": "Text Input - Print Archive Name",
            "explanatoryPower": 9,
            "truthfulness": 9,
            "intuitiveness": 9,
            "rationale": "Photographers absolutely name and file their prints. Text input for filename is natural and directly maps to how users organize digital work."
          }
        ],
        "inputOutputFit": 8,
        "overallMappingScore": 8,
        "rationale": "Strong mapping for file organization. Weakness: actual file save is instantaneous, not a physical process, but metaphorical alignment is good enough."
      }
    ],
    "ioAnalysis": {
      "textInputHandling": 9,
      "modelInputHandling": 9,
      "intermediateHandling": 7,
      "finalOutputHandling": 9,
      "rationale": "TEXT HANDLING (9/10): Both positive and negative prompts remain explicitly textual. Users type natural language descriptions and see their text in director's clipboards. Absolutely transparent. MODEL HANDLING (9/10): Checkpoint selection is presented as 'Camera Body' dropdown—rich, intuitive abstraction that photographers understand immediately. INTERMEDIATE HANDLING (7/10): Latent space as 'unexposed negative' is reasonable abstraction but loses mathematical precision. VAE as 'enlarger' is good but the underlying tech is hidden. FINAL OUTPUT (9/10): Output IS an image, and the metaphor correctly terminates with 'developed print' and 'filed photograph'—users see exactly what they're generating."
    }
  },
  "scores": {
    "explanatoryPower": 8.2,
    "truthfulness": 7.8,
    "completeness": 8.5,
    "intuitiveInteraction": 8.4,
    "fractalConsistency": 8.1,
    "overall": 8.18,
    "rationale": "The Darkroom Photography metaphor is strong, concrete, and experientially grounded. STRENGTHS: (1) Text prompts remain fully textual and user-editable (9/10 text handling), giving no loss of capability. (2) Core generation parameters (steps, cfg) have excellent explanatory controls (9/10 intuitiveness for development time/strength). (3) Camera selection and film format are intuitive (8/10 model and intermediate handling). (4) Final output correctly maps to 'developed print' with file naming (9/10 final handling). (5) Audience can visualize the entire workflow as a darkroom sequence. WEAKNESSES: (1) Seed as 'exposure index' is somewhat forced (6/10 truthfulness); it's not entirely wrong but less intuitive than 'randomness source.' (2) Sampler and scheduler controls are abstract and don't map clearly to darkroom equipment (5-6/10 explanatory power); photographers don't select 'development methods' explicitly. (3) Latent space abstraction loses some technical precision (7/10 intermediate handling). COMPLETENESS: All knots have metaphor mappings; most key parameters have facade controls. Minor controls (scheduler, sampler) are included but less polished. Overall completeness is high (8.5/10). CONSISTENCY: Metaphor is relatively uniform—all elements fit within a darkroom workspace scenario. Some variance in how abstract (latent) vs. concrete (film format) elements are treated, but variance is acceptable (8.1/10 fractal consistency). OVERALL SCORE: 8.1/10—a robust, experientially intuitive metaphor that excels at preserving text input fidelity while offering photographers a familiar mental model."
  }
}